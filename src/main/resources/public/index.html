<!DOCTYPE html>
<html>

	<head>
		<title>team caps lock</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	</head>
	
	<form method="post" action="/start" class="form-inline" role="form">
	</form>
	
	<body>
		<h1>Tic-Tac-Toe</h1>
		
		<script type="text/javascript">
		
		$(document).ready(function() {
          $.ajax({
            type: 'GET',
            url: '/getTable',
          }).done(function(result) {
			for(var i = 0; i < 10; i++){
				$('#' + (i + 1)).html(result.charAt(i)).attr('class', 'alert alert-success');
			}
          }).fail(function() {
            $('#bla').html('Failed to load table! \n Contact team caps lock for support.').attr('class', 'alert alert-danger');
          });
		  
			var form = $('#pInput');
			form.submit(function( event ) {
			  var number = $("#xIn").val();
			  $('#xIn').val('');
			  $.ajax({
				type: form.attr('method'),
				url: form.attr('action'),
				data: 'xIn=' + number
			  }).done(function(result) {
					if(result.length > 10){
					for(var i = 0; i < 10; i++){
						$('#' + (i + 1)).html(result.charAt(i)).attr('class', 'alert alert-success');
						}
						$('#gameStatus').html(result.substring(9));
						$('#play').attr('disabled', true);
					}
					else{
						for(var i = 0; i < 10; i++){
						$('#' + (i + 1)).html(result.charAt(i)).attr('class', 'alert alert-success');
					}
					}
					$.ajax({
					type: 'GET',
					url: '/player'
				}).done(function(result) {
					$('#pRound').html(result);
				}).fail(function() {
					$('#error').html('Failed to load player! \n Contact team caps lock for support.').attr('class', 'alert alert-danger'.delay(2000).fadeOut());
				});
					
					
					
					
			  }).fail(function() {
				$('#error').html('Error, illegal position...').attr('class', 'alert alert-danger').delay(2000).fadeOut();
				
			  });
			  event.preventDefault();
			});
		  
		  
		  $.ajax({
					type: 'GET',
					url: '/player'
				}).done(function(result) {
					$('#pRound').html(result);
				}).fail(function() {
					$('#error').html('Failed to load player! \n Contact team caps lock for support.').attr('class', 'alert alert-danger').delay(2000).fadeOut();
				});
			
			});
			
			<!-- function clearFields(){ -->
				<!-- document.getElementById("pInput").reset(); -->
			<!-- } -->
		
		</script>
		
		<div id="error"></div>
		<h2 id="pRound"></h2>
		
		<table id="gameTable">
			<tbody>
				<tr>
					<td id="1"></td>
					<td id="2"></td>
					<td id="3"></td>
				</tr>
				<tr>
					<td id="4"></td>
					<td id="5"></td>
					<td id="6"></td>
				</tr>
				<tr>
					<td id="7"></td>
					<td id="8"></td>
					<td id="9"></td>
				</tr>
			</tbody>
		</table>
		
		<form id="pInput" method="post" action="/game" role="form">
			Input position: <input type="text" name="xInput" id="xIn" /><br/>
			<input id="play" type="submit" value="Submit" />
		</form>
		<h2 id="gameStatus"></h2>
</html>